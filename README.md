# MDImageEmbed

> å°† Markdown æ–‡ä»¶ä¸­çš„å›¾ç‰‡è½¬æ¢ä¸º Base64 å†…åµŒæ ¼å¼çš„ Obsidian æ’ä»¶

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Obsidian](https://img.shields.io/badge/Obsidian-Plugin-7c3aed)](https://obsidian.md)

## ğŸ“– ç®€ä»‹

MDImageEmbed æ˜¯ä¸€ä¸ª Obsidian æ’ä»¶ï¼Œå¯ä»¥å°† Markdown æ–‡ä»¶ä¸­çš„æœ¬åœ°å›¾ç‰‡è½¬æ¢ä¸º Base64 å†…åµŒæ ¼å¼ã€‚é€‚ç”¨äºå¯¼å‡ºç¬”è®°ã€å‘å¸ƒåšå®¢ã€åˆ†äº«æ–‡æ¡£ç­‰åœºæ™¯ï¼Œè®©ä½ çš„ Markdown æ–‡ä»¶çœŸæ­£åšåˆ°"å•æ–‡ä»¶åŒ…å«æ‰€æœ‰å†…å®¹"ã€‚

### ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªæ’ä»¶ï¼Ÿ

- ğŸ“ **å‘å¸ƒåšå®¢**ï¼šæ— éœ€å•ç‹¬ä¸Šä¼ å›¾ç‰‡åˆ°å›¾åºŠï¼Œä¸€ä¸ªæ–‡ä»¶æå®š
- ğŸ“¤ **åˆ†äº«ç¬”è®°**ï¼šå‘é€å•ä¸ª Markdown æ–‡ä»¶ï¼Œæ¥æ”¶è€…æ— éœ€ä¸‹è½½å›¾ç‰‡
- ğŸ“± **å…¬ä¼—å·/å¹³å°**ï¼šéƒ¨åˆ†å¹³å°ä¸æ”¯æŒå¤–é“¾å›¾ç‰‡ï¼ŒBase64 å®Œç¾è§£å†³
- ğŸ“¦ **å½’æ¡£æ–‡æ¡£**ï¼šé¿å…å›¾ç‰‡é“¾æ¥å¤±æ•ˆï¼Œæ°¸ä¹…ä¿å­˜å®Œæ•´å†…å®¹

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½

- ğŸ“‹ **å¤åˆ¶ä¸º Base64 æ ¼å¼**ï¼šå³é”®æ–‡ä»¶ â†’ è½¬æ¢åè‡ªåŠ¨å¤åˆ¶åˆ°å‰ªè´´æ¿
- ğŸ’¾ **å¦å­˜ä¸º Base64 æ ¼å¼**ï¼šå³é”®æ–‡ä»¶ â†’ ç”Ÿæˆæ–°æ–‡ä»¶ï¼ˆ`åŸæ–‡ä»¶å_base64.md`ï¼‰

### æ™ºèƒ½ç‰¹æ€§

- ğŸ¯ **æ™ºèƒ½è·¯å¾„è§£æ**ï¼šè‡ªåŠ¨å¤„ç† Obsidian å„ç§å›¾ç‰‡è·¯å¾„æ ¼å¼
  - æ ‡å‡† Markdown: `![alt](path)`
  - å°–æ‹¬å·è·¯å¾„: `![alt](<path>)`
  - Obsidian Wiki é“¾æ¥: `![[image.png]]`
  - ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„
- ğŸ”„ **è‡ªåŠ¨è·³è¿‡**ï¼š
  - å·²è½¬æ¢çš„ Base64 å›¾ç‰‡
  - ç½‘ç»œå›¾ç‰‡ (http:// / https://)
  - æ‰¾ä¸åˆ°çš„å›¾ç‰‡
- ğŸ–¼ï¸ **æ”¯æŒæ ¼å¼**ï¼šPNG, JPG, JPEG, GIF, WebP, SVG, BMP

## ğŸ“¦ å®‰è£…

### æ–¹æ³• 1: æ‰‹åŠ¨å®‰è£…ï¼ˆæ¨èï¼‰

1. ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ `main.js` å’Œ `manifest.json`
2. åœ¨ä½ çš„ Obsidian Vault ä¸­åˆ›å»ºæ’ä»¶ç›®å½•ï¼š
   ```
   <Vault>/.obsidian/plugins/md-image-embed/
   ```
3. å°†ä¸‹è½½çš„æ–‡ä»¶æ”¾å…¥è¯¥ç›®å½•
4. é‡å¯ Obsidian
5. åœ¨ **è®¾ç½® â†’ ç¤¾åŒºæ’ä»¶** ä¸­å¯ç”¨ "MD Image Embed"

### æ–¹æ³• 2: ä»æºç æ„å»º

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/mengzhishanghun/MZSH-Tools.git
cd MZSH-Tools/MDImageEmbed/ObsidianPlugin

# å®‰è£…ä¾èµ–
npm install

# æ„å»º
npm run build

# å¤åˆ¶åˆ° Obsidian æ’ä»¶ç›®å½•
# Windows
copy main.js "<Vault>\.obsidian\plugins\md-image-embed\main.js"
copy manifest.json "<Vault>\.obsidian\plugins\md-image-embed\manifest.json"

# macOS/Linux
cp main.js "<Vault>/.obsidian/plugins/md-image-embed/main.js"
cp manifest.json "<Vault>/.obsidian/plugins/md-image-embed/manifest.json"
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å¤åˆ¶åˆ°å‰ªè´´æ¿

1. åœ¨ Obsidian æ–‡ä»¶æµè§ˆå™¨ä¸­å³é”®ç‚¹å‡»ä»»æ„ `.md` æ–‡ä»¶
2. é€‰æ‹© **ğŸ“‹ å¤åˆ¶ä¸º Base64 æ ¼å¼**
3. ç­‰å¾…è½¬æ¢å®Œæˆï¼ˆä¼šæ˜¾ç¤ºæç¤º âœ… å·²å¤åˆ¶ Base64 æ ¼å¼åˆ°å‰ªè´´æ¿ï¼‰
4. ç²˜è´´åˆ°ä»»ä½•éœ€è¦çš„åœ°æ–¹ï¼ˆåšå®¢ç¼–è¾‘å™¨ã€å…¬ä¼—å·åå°ç­‰ï¼‰

### å¦å­˜ä¸ºæ–°æ–‡ä»¶

1. åœ¨ Obsidian æ–‡ä»¶æµè§ˆå™¨ä¸­å³é”®ç‚¹å‡»ä»»æ„ `.md` æ–‡ä»¶
2. é€‰æ‹© **ğŸ’¾ å¦å­˜ä¸º Base64 æ ¼å¼**
3. è‡ªåŠ¨ç”Ÿæˆæ–°æ–‡ä»¶ï¼š`åŸæ–‡ä»¶å_base64.md`
4. æ–°æ–‡ä»¶ä¸­æ‰€æœ‰æœ¬åœ°å›¾ç‰‡å·²è½¬æ¢ä¸º Base64 æ ¼å¼

## ğŸ“‹ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: å‘å¸ƒåšå®¢æ–‡ç« 

```markdown
<!-- åŸæ–‡ä»¶ï¼šåŒ…å«æœ¬åœ°å›¾ç‰‡ -->
![æ¶æ„å›¾](./images/architecture.png)

<!-- è½¬æ¢åï¼šBase64 å†…åµŒ -->
![æ¶æ„å›¾](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...)
```

**ä¼˜åŠ¿**ï¼šæ— éœ€ä¸Šä¼ å›¾ç‰‡åˆ°å›¾åºŠï¼Œä¸€é”®å‘å¸ƒ

### åœºæ™¯ 2: åˆ†äº«æŠ€æœ¯æ–‡æ¡£

ä½ å†™äº†ä¸€ç¯‡åŒ…å«å¤§é‡æˆªå›¾çš„æŠ€æœ¯æ–‡æ¡£ï¼Œéœ€è¦åˆ†äº«ç»™åŒäº‹ï¼š

1. å³é”®æ–‡ä»¶ â†’ **å¦å­˜ä¸º Base64 æ ¼å¼**
2. å‘é€ç”Ÿæˆçš„ `_base64.md` æ–‡ä»¶
3. åŒäº‹æ‰“å¼€å³å¯çœ‹åˆ°å®Œæ•´å†…å®¹ï¼ˆæ— éœ€ä¸‹è½½å›¾ç‰‡æ–‡ä»¶å¤¹ï¼‰

### åœºæ™¯ 3: å…¬ä¼—å·å‘å¸ƒ

å…¬ä¼—å·ä¸æ”¯æŒå¤–é“¾å›¾ç‰‡ï¼Œä½¿ç”¨æœ¬æ’ä»¶ï¼š

1. å³é”®ç¬”è®° â†’ **å¤åˆ¶ä¸º Base64 æ ¼å¼**
2. ç²˜è´´åˆ°å…¬ä¼—å·ç¼–è¾‘å™¨
3. æ‰€æœ‰å›¾ç‰‡æ­£å¸¸æ˜¾ç¤º

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### è·¯å¾„è§£æç­–ç•¥

æ’ä»¶ä½¿ç”¨ä¸‰å±‚è·¯å¾„è§£ææœºåˆ¶ï¼Œç¡®ä¿æ‰¾åˆ°å›¾ç‰‡ï¼š

1. **Vault æ ¹ç›®å½•æŸ¥æ‰¾**ï¼š`/é™„ä»¶/image.png` â†’ `<Vault>/é™„ä»¶/image.png`
2. **ç›¸å¯¹è·¯å¾„æŸ¥æ‰¾**ï¼š`./images/pic.png` â†’ ç›¸å¯¹äºå½“å‰ MD æ–‡ä»¶
3. **Obsidian é“¾æ¥è§£æ**ï¼šä½¿ç”¨ Obsidian çš„ `getFirstLinkpathDest` API

### æ”¯æŒçš„å›¾ç‰‡è¯­æ³•

```markdown
# æ ‡å‡† Markdown
![æè¿°](path/to/image.png)

# å°–æ‹¬å·è·¯å¾„ï¼ˆObsidian å¸¸ç”¨ï¼‰
![æè¿°](<path/to/image.png>)
![æè¿°](</é™„ä»¶/image.png>)

# Obsidian Wiki é“¾æ¥
![[image.png]]
![[folder/image.png]]
```

### Base64 ç¼–ç 

- ä½¿ç”¨æµè§ˆå™¨åŸç”Ÿ `btoa()` æ–¹æ³•
- è‡ªåŠ¨è¯†åˆ« MIME ç±»å‹
- æ”¯æŒæ‰€æœ‰ä¸»æµå›¾ç‰‡æ ¼å¼

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
MDImageEmbed/
â”œâ”€â”€ ObsidianPlugin/              # Obsidian æ’ä»¶æºç 
â”‚   â”œâ”€â”€ main.ts                  # æ’ä»¶ä¸»æ–‡ä»¶
â”‚   â”œâ”€â”€ manifest.json            # æ’ä»¶é…ç½®
â”‚   â”œâ”€â”€ package.json             # ä¾èµ–ç®¡ç†
â”‚   â”œâ”€â”€ tsconfig.json            # TypeScript é…ç½®
â”‚   â”œâ”€â”€ esbuild.config.mjs       # æ„å»ºé…ç½®
â”‚   â”œâ”€â”€ README.md                # æ’ä»¶æ–‡æ¡£
â”‚   â””â”€â”€ INSTALL.md               # å®‰è£…æŒ‡å—
â”œâ”€â”€ .gitignore                   # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ LICENSE                      # MIT è®¸å¯è¯
â””â”€â”€ README.md                    # é¡¹ç›®è¯´æ˜ï¼ˆæœ¬æ–‡ä»¶ï¼‰
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### æ–‡ä»¶å¤§å°

Base64 ç¼–ç ä¼šå¢åŠ çº¦ **33%** çš„æ–‡ä»¶å¤§å°ï¼š

- åŸå›¾ 100KB â†’ Base64 çº¦ 133KB
- å¤šå›¾æ–‡æ¡£å¯èƒ½ä¼šå˜å¾—å¾ˆå¤§

**å»ºè®®**ï¼š
- ä»…åœ¨éœ€è¦å¯¼å‡º/åˆ†äº«æ—¶ä½¿ç”¨
- å¤§é‡å›¾ç‰‡çš„æ–‡æ¡£å»ºè®®å‹ç¼©å›¾ç‰‡åå†è½¬æ¢

### æ€§èƒ½

- è½¬æ¢é€Ÿåº¦å–å†³äºå›¾ç‰‡æ•°é‡å’Œå¤§å°
- 10 å¼ å›¾ç‰‡ï¼ˆæ€»è®¡ 5MBï¼‰çº¦éœ€ 2-3 ç§’
- è½¬æ¢è¿‡ç¨‹åœ¨åå°å¼‚æ­¥è¿›è¡Œï¼Œä¸ä¼šå¡é¡¿ç•Œé¢

### å…¼å®¹æ€§

- âœ… Obsidian æ¡Œé¢ç‰ˆï¼ˆWindows, macOS, Linuxï¼‰
- âœ… Obsidian ç§»åŠ¨ç‰ˆï¼ˆiOS, Androidï¼‰
- âš ï¸ éœ€è¦ Obsidian 0.15.0 æˆ–æ›´é«˜ç‰ˆæœ¬

## ğŸ› ï¸ å¼€å‘

### ç¯å¢ƒè¦æ±‚

- Node.js >= 16
- npm >= 7

### å¼€å‘å‘½ä»¤

```bash
# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼‰
npm run dev

# ç”Ÿäº§æ„å»º
npm run build

# ç±»å‹æ£€æŸ¥
tsc -noEmit
```

### è°ƒè¯•

1. åœ¨ Obsidian ä¸­å¯ç”¨å¼€å‘è€…å·¥å…·ï¼š`Ctrl+Shift+I` (Windows) / `Cmd+Option+I` (macOS)
2. ä¿®æ”¹ä»£ç åæŒ‰ `Ctrl+R` é‡è½½æ’ä»¶
3. æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼š`git checkout -b feature/AmazingFeature`
3. æäº¤æ›´æ”¹ï¼š`git commit -m 'Add some AmazingFeature'`
4. æ¨é€åˆ°åˆ†æ”¯ï¼š`git push origin feature/AmazingFeature`
5. æäº¤ Pull Request

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-10-14)

- âœ¨ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- ğŸ“‹ æ”¯æŒå¤åˆ¶ä¸º Base64 æ ¼å¼åˆ°å‰ªè´´æ¿
- ğŸ’¾ æ”¯æŒå¦å­˜ä¸º Base64 æ ¼å¼æ–°æ–‡ä»¶
- ğŸ¯ æ™ºèƒ½è·¯å¾„è§£æï¼ˆVault æ ¹ç›®å½•ã€ç›¸å¯¹è·¯å¾„ã€Wiki é“¾æ¥ï¼‰
- ğŸ–¼ï¸ æ”¯æŒ PNG, JPG, JPEG, GIF, WebP, SVG, BMP

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºåè®®ã€‚

## ğŸ™ è‡´è°¢

- [Obsidian](https://obsidian.md) - å¼ºå¤§çš„çŸ¥è¯†ç®¡ç†å·¥å…·
- [Obsidian API](https://github.com/obsidianmd/obsidian-api) - å®˜æ–¹ API æ–‡æ¡£

## ğŸ“® è”ç³»æ–¹å¼

- GitHub: [@mengzhishanghun](https://github.com/mengzhishanghun)
- Issues: [æäº¤é—®é¢˜](https://github.com/mengzhishanghun/MZSH-Tools/issues)

---

**å¦‚æœè¿™ä¸ªæ’ä»¶å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª â­ï¸ Star æ”¯æŒä¸€ä¸‹ï¼**
